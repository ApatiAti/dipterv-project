<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorator="mainTemplate">
<head>
<meta charset="UTF-8" />

<!--/*-->
<link href="http://getbootstrap.com/dist/css/bootstrap.min.css"
	rel="stylesheet" />
<link
	href="http://getbootstrap.com/examples/sticky-footer-navbar/sticky-footer-navbar.css"
	rel="stylesheet" />
<link href="http://getbootstrap.com/examples/theme/theme.css"
	rel="stylesheet" />
<!--*/-->
</head>
<body>
	<div class="page-header" layout:fragment="page_Header">
		<h3>Company list</h3>
	</div>

	<section layout:fragment="page-content">
		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">My work place</h3>
			</div>
			<div class="panel-body">
				<div class="row">
					<th:block th:if="${myJob.id ne null}" th:object="${myJob.company}">
						<div class="col-sm-4 col-md-4" th:switch="*{productType.name()}">
								<img th:case="'WEAPON'" alt="320x240" style="width: 320px; height: 240px;" class="img-thumbnail"
									src="http://www.jesuismonreve.org/wp-content/uploads/2010/11/the_cloud_factory_01.jpg"
									data-holder-rendered="true" /> 
								<img th:case="'ENERGYDRINK'" alt="320x240" style="width: 320px; height: 240px;" class="img-thumbnail"
									src="http://cdn.phys.org/newman/gfx/news/hires/2013/1-smokebillows.jpg"
									data-holder-rendered="true" />
						</div>
						<div class="col-sm-8 col-md-8 ">
							<ul>
								<li style="line-height: 2em;"><strong>Company name:</strong></li>
								<li>
									<p style="word-wrap: break-word;">
										<a href="#" th:href="@{/company/__*{id}__}"><span th:text="*{name}">Humbák művek</span></a>
									</p>
								</li>
								
								<li><strong> Product type: </strong></li>
								<li>
									<p th:text="*{productType}">WEPON</p>
								</li>
	
								<li><strong>Region:</strong></li>
								<li>
									<p>
										<a href="#" th:href="@{/region(regionId=*{region.id})}"><span th:text="*{region.name}"> Valami régió</span></a>
									</p>
								</li>
	
								<li><strong>Your last work date</strong></li>
								<li>
									<th:block th:switch="${myJob.lastWorkTime ne null}">
									 	<p id="myLastWorkDate" th:case="${true}" th:text="${{myJob.lastWorkTime}}">2015-05-42</p>
									 	<p id="myLastWorkDate" th:case="${false}" > Never </p>
									</th:block>
								</li>
								
								<li>
									<p>
										<form id="myWorkPlaceWorkFormId" th:action="@{/company/work/__*{id}__}"  method="post"> 
											<input type="submit" class="btn btn-default btn-info" value="Work" />
										</form>
								    </p>
								</li>

								<li>
									<a class="btn btn-default btn-warning" href="#" th:href="@{/company/quit}"> Quit</a>
								</li>
							</ul>
						</div>	
					</th:block>	
					<th:block th:unless="${myJob.id ne null}">
						<div class="col-sm-8 col-md-8 ">
							<p> <strong>You have no work place! </strong></p>
							<p><a class="btn btn-default btn-info" href="#" th:href="@{/jobOffers}" role="button"> Show job offers </a></p>
						</div>
					</th:block>		
				</div>
			</div>
		</div>

		<div class="panel panel-default">
			<div class="panel-heading">
				<h3 class="panel-title">My companies place</h3>
			</div>
			<div class="panel-body">
				<div class="row">
					<th:block th:if="${not #lists.isEmpty(myCompanies)}" th:object="${company}"
						th:each="company : ${myCompanies}">

						<div class="col-sm-5 col-md-5" th:switch="*{productType.name()}" >
							<img th:case="'WEAPON'" alt="320x240" style="width: 320px; height: 240px;" class="img-thumbnail"
								src="http://www.jesuismonreve.org/wp-content/uploads/2010/11/the_cloud_factory_01.jpg"
								data-holder-rendered="true" /> 
							<img th:case="'ENERGYDRINK'" alt="320x240" style="width: 320px; height: 240px;" class="img-thumbnail"
								src="http://cdn.phys.org/newman/gfx/news/hires/2013/1-smokebillows.jpg"
								data-holder-rendered="true" />
						</div>
						<div class="col-sm-7 col-md-7">
							<ul>
								<li style="line-height: 2em;"><strong>Company name:</strong></li>
								<li>
									<p style="word-wrap: break-word;" th:text="*{name}">Gyár</p>
								</li>

								<li><strong> Product type: </strong></li>
								<li>
									<p th:text="*{productType}">WEPON</p>
								</li>

								<li><strong>Region:</strong></li>
								<li>
									<p>
										<a href="#" th:href="@{/region(regionId=*{region.id})}"><span th:text="*{region.name}"> Region name</span></a>
									</p>
								</li>

								<li><strong>Your last work date</strong></li>
								<li>
									<th:block th:switch="${company.ownerLastWorkTime ne null}">
									 	<p th:case="${true}" th:text="${{company.ownerLastWorkTime}}">2015-05-42</p>
									 	<p th:case="${false}" > Never </p>
									</th:block>
								</li>
								
								<li>
									<a class="btn btn-default btn-info" href="#" th:href="@{/company/__*{id}__}">Company details</a> 
								</li>
							</ul>
						</div>
					</th:block>
					<th:block th:unless="${not #lists.isEmpty(myCompanies)}" th:object="${company}">
						<div class="col-sm-8 col-md-8 ">
							<p> <strong>You have no company!</strong> </p> 
						</div>						
					</th:block>
				</div>
				<div class="row">	
					<div class="panel panel-default" style="margin: 0px 10px 0px 10px;">			
						<div class="panel-heading" style="overflow: auto;" >
							<h3 class="panel-title">
								<span> Create Company
								</span>
								<button style="float: right" data-toggle="collapse" data-target="#createCompany">
									<span class="glyphicon glyphicon-chevron-down"></span>
								</button>
							</h3>
						</div>
					
						<div id="createCompany" class="collapse in">
							<div layout:replace="fragments/createCompany :: createCompany" >
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	
		<div id="tesztResult" >
		</div>
	</section>


	<section layout:fragment="scripts">
		<script>
			$(document).ready(function() {
			
				$('#myWorkPlaceWorkFormId').submit(function(event) {
					event.preventDefault(); // Prevent the form from submitting via the browser.
					
					var form = $(this);

					$.ajax({
						type : form.attr('method'),
						url : form.attr('action'),
						data : form.serialize(),
						dataType : 'json'
					}).done(function(data) {
						updateCitizen(data);
					}).fail(function(data) {
						var responseText = JSON.parse(data.responseText);
						putAlertBox("danger","Error", responseText.errorMessage);				
					});
	
				});

			});
		</script>
	</section>

	<!--/*-->
	<!-- Bootstrap core JavaScript
	    ================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="#" th:src="@{/template_files/jquery.min.js}"></script>
	<script src="#" th:src="@{/template_files/bootstrap.min.js}"></script>
	<script src="#" th:src="@{/template_files/myScripts.js}"></script>
	<!--*/-->
	
	
	
</body>
</html>